<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ú® ÿ£ŸÖŸÜŸäÿßÿ™ ŸäŸÜÿßŸäÿ± ‚ú®</title>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #ff00ff;
            --secondary: #00ffff;
            --accent: #ffff00;
            --dark: #0c0c0c;
            --darker: #050505;
            --light: #ffffff;
            --success: #00ff00;
            --danger: #ff0000;
            --warning: #ffaa00;
            --info: #00aaff;
            
            --gradient-primary: linear-gradient(135deg, var(--primary), var(--secondary));
            --gradient-secondary: linear-gradient(135deg, var(--secondary), var(--accent));
            --gradient-danger: linear-gradient(135deg, var(--danger), #ff5500);
            
            --shadow-neon: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--primary);
            --shadow-secondary: 0 0 10px var(--secondary), 0 0 20px var(--secondary);
            --shadow-accent: 0 0 10px var(--accent), 0 0 20px var(--accent);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker) 0%, #1a0b2e 50%, #0d1b2a 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 0, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 255, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 255, 0, 0.1) 0%, transparent 50%);
            z-index: -2;
            pointer-events: none;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) infinite alternate;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1.2); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        /* ==================== ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ==================== */
        .date-check-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            animation: fadeIn 1s ease-out;
        }
        
        .date-check-box {
            background: rgba(20, 20, 30, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 60px 50px;
            width: 100%;
            max-width: 800px;
            border: 3px solid var(--primary);
            box-shadow: 
                var(--shadow-neon),
                inset 0 0 50px rgba(255, 0, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .date-check-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(255, 0, 255, 0.1) 50%, 
                transparent 70%);
            animation: shine 8s linear infinite;
            z-index: 0;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(0deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(360deg); }
        }
        
        .main-title {
            font-size: 4rem;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .main-title .neon-text {
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: none;
            font-weight: 900;
            letter-spacing: 2px;
            position: relative;
            display: inline-block;
        }
        
        .main-title .neon-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            filter: blur(15px);
            opacity: 0.7;
            z-index: -1;
        }
        
        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 40px;
            font-size: 1.5rem;
            line-height: 1.8;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .subtitle p {
            margin-bottom: 15px;
        }
        
        .subtitle strong {
            color: var(--accent);
            font-weight: 700;
        }
        
        .date-info {
            background: linear-gradient(135deg, 
                rgba(255, 0, 255, 0.1), 
                rgba(0, 255, 255, 0.1));
            padding: 35px;
            border-radius: 25px;
            margin-bottom: 40px;
            border: 2px solid var(--secondary);
            box-shadow: var(--shadow-secondary);
            position: relative;
            z-index: 1;
            backdrop-filter: blur(5px);
        }
        
        .current-date {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 20px;
            font-weight: 700;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .next-closing {
            font-size: 1.8rem;
            color: var(--accent);
            margin-bottom: 30px;
            text-align: center;
            font-weight: 600;
        }
        
        .countdown-container {
            background: rgba(0, 0, 0, 0.4);
            padding: 25px;
            border-radius: 20px;
            border: 2px solid var(--primary);
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }
        
        .countdown-title {
            text-align: center;
            color: var(--light);
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .countdown {
            display: flex;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
        }
        
        .countdown-item {
            text-align: center;
            flex: 1;
            min-width: 120px;
        }
        
        .countdown-number {
            font-size: 3.5rem;
            font-weight: 900;
            color: var(--primary);
            text-shadow: var(--shadow-neon);
            line-height: 1;
            margin-bottom: 10px;
            font-variant-numeric: tabular-nums;
        }
        
        .countdown-label {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }
        
        .month-progress-container {
            margin: 30px 0;
        }
        
        .month-progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1.2rem;
            color: var(--secondary);
        }
        
        .month-progress {
            width: 100%;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid var(--secondary);
            position: relative;
        }
        
        .month-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, 
                var(--secondary) 0%, 
                var(--primary) 50%, 
                var(--accent) 100%);
            border-radius: 13px;
            transition: width 1s ease-out;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark);
            font-weight: 700;
            font-size: 1rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .progress-text {
            text-align: center;
            margin-top: 15px;
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .days-remaining {
            font-size: 2.8rem;
            color: var(--primary);
            font-weight: 900;
            margin: 25px 0;
            text-align: center;
            text-shadow: var(--shadow-neon);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .message-box {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.15), 
                rgba(255, 140, 0, 0.15));
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 35px;
            border: 2px solid var(--accent);
            box-shadow: var(--shadow-accent);
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        .message-box i {
            font-size: 3.5rem;
            color: var(--accent);
            margin-bottom: 20px;
            display: block;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .message-box h3 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .message-box p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.3rem;
            line-height: 1.6;
        }
        
        .access-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        
        .access-btn {
            background: linear-gradient(135deg, 
                rgba(255, 0, 255, 0.2), 
                rgba(0, 255, 255, 0.2));
            border: 3px solid var(--primary);
            color: var(--light);
            padding: 30px 25px;
            border-radius: 20px;
            font-size: 1.5rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .access-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.7s;
            z-index: -1;
        }
        
        .access-btn:hover {
            transform: translateY(-10px) scale(1.03);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            box-shadow: var(--shadow-neon);
        }
        
        .access-btn:hover::before {
            left: 100%;
        }
        
        .access-btn i {
            font-size: 2rem;
        }
        
        .access-btn.admin-btn {
            background: linear-gradient(135deg, 
                rgba(255, 0, 0, 0.2), 
                rgba(255, 0, 255, 0.2));
            border: 3px solid var(--danger);
        }
        
        .access-btn.admin-btn:hover {
            background: linear-gradient(135deg, var(--danger), var(--primary));
            box-shadow: 0 0 30px var(--danger);
        }
        
        .access-btn.view-btn {
            background: linear-gradient(135deg, 
                rgba(0, 170, 255, 0.2), 
                rgba(0, 255, 255, 0.2));
            border: 3px solid var(--info);
        }
        
        .access-btn.view-btn:hover {
            background: linear-gradient(135deg, var(--info), var(--secondary));
            box-shadow: 0 0 30px var(--info);
        }
        
        /* ==================== ÿ¥ÿßÿ¥ÿßÿ™ ÿßŸÑÿØÿÆŸàŸÑ ==================== */
        .login-screen {
            display: none;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            animation: slideUp 0.6s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .login-box {
            background: rgba(20, 20, 30, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 50px 40px;
            width: 100%;
            max-width: 550px;
            border: 3px solid var(--secondary);
            box-shadow: var(--shadow-secondary);
            position: relative;
            overflow: hidden;
        }
        
        .login-title {
            font-size: 2.8rem;
            margin-bottom: 30px;
            text-align: center;
            color: var(--secondary);
            font-weight: 800;
            position: relative;
        }
        
        .login-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--secondary), transparent);
            border-radius: 2px;
        }
        
        .month-status {
            background: linear-gradient(135deg, 
                rgba(255, 215, 0, 0.15), 
                rgba(255, 140, 0, 0.15));
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 2px solid var(--accent);
            text-align: center;
        }
        
        .month-status h2 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1.6rem;
            font-weight: 700;
        }
        
        .month-status p {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.2rem;
        }
        
        .input-group {
            margin-bottom: 25px;
            position: relative;
        }
        
        .input-label {
            display: block;
            margin-bottom: 12px;
            color: var(--accent);
            font-size: 1.3rem;
            font-weight: 700;
            text-align: right;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .input-field {
            width: 100%;
            padding: 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 3px solid var(--accent);
            border-radius: 15px;
            color: var(--light);
            font-size: 1.2rem;
            transition: all 0.3s;
            text-align: center;
            outline: none;
        }
        
        .input-field:focus {
            border-color: var(--secondary);
            box-shadow: var(--shadow-secondary);
            background: rgba(255, 255, 255, 0.12);
        }
        
        textarea.input-field {
            min-height: 180px;
            resize: vertical;
            text-align: right;
            font-size: 1.2rem;
            padding: 20px;
            line-height: 1.6;
        }
        
        .login-btn {
            width: 100%;
            padding: 22px;
            background: var(--gradient-secondary);
            color: var(--dark);
            border: none;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: 800;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .login-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-secondary);
            background: linear-gradient(135deg, var(--accent), var(--secondary));
        }
        
        .back-btn {
            width: 100%;
            padding: 18px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 2px solid var(--info);
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            background: rgba(0, 170, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .info-text {
            text-align: center;
            margin-top: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .info-text i {
            color: var(--accent);
            margin-right: 8px;
        }
        
        /* ==================== ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ==================== */
        .main-app {
            display: none;
            animation: fadeIn 0.8s ease-out;
        }
        
        .header {
            background: linear-gradient(135deg, 
                rgba(255, 0, 255, 0.15), 
                rgba(0, 255, 255, 0.15));
            padding: 25px;
            border-radius: 25px;
            margin-bottom: 30px;
            border: 3px solid var(--primary);
            box-shadow: var(--shadow-neon);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, 
                var(--primary), 
                var(--secondary), 
                var(--accent), 
                var(--primary));
            animation: borderFlow 3s linear infinite;
        }
        
        @keyframes borderFlow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .site-title h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 900;
        }
        
        .site-title p {
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
            font-size: 1.1rem;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-avatar {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--dark);
            border: 3px solid var(--light);
            box-shadow: 0 0 20px var(--primary);
            transition: all 0.3s;
        }
        
        .user-avatar:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 0 30px var(--primary);
        }
        
        .user-details h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            color: var(--secondary);
            font-weight: 700;
        }
        
        .user-details p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            margin-bottom: 8px;
        }
        
        .user-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            display: inline-block;
        }
        
        .badge.admin {
            background: linear-gradient(135deg, var(--danger), var(--primary));
            color: white;
        }
        
        .badge.user {
            background: linear-gradient(135deg, var(--info), var(--secondary));
            color: white;
        }
        
        .badge.viewer {
            background: linear-gradient(135deg, var(--accent), #ffaa00);
            color: var(--dark);
        }
        
        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 2px solid var(--danger);
            padding: 12px 25px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .logout-btn:hover {
            background: var(--danger);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 0, 0, 0.3);
        }
        
        /* ==================== ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿØŸäÿ± ==================== */
        .admin-panel {
            background: linear-gradient(135deg, 
                rgba(255, 0, 0, 0.1), 
                rgba(255, 0, 255, 0.1));
            padding: 35px;
            border-radius: 25px;
            margin-bottom: 40px;
            border: 3px solid var(--danger);
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.3);
            display: none;
            position: relative;
            overflow: hidden;
        }
        
        .admin-panel::before {
            content: 'üëë';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 4rem;
            opacity: 0.1;
            transform: rotate(-15deg);
        }
        
        .admin-panel::after {
            content: 'üëë';
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 4rem;
            opacity: 0.1;
            transform: rotate(15deg);
        }
        
        .admin-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: var(--danger);
            font-weight: 900;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            position: relative;
            z-index: 1;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: rgba(0, 0, 0, 0.5);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid var(--primary);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-neon);
        }
        
        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary);
            display: block;
        }
        
        .stat-number {
            font-size: 3.5rem;
            font-weight: 900;
            margin: 15px 0;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1;
        }
        
        .stat-label {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .clear-all-btn {
            background: var(--gradient-danger);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 30px auto;
            transition: all 0.3s;
        }
        
        .clear-all-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 0, 0, 0.4);
        }
        
        .admin-table-container {
            overflow-x: auto;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--secondary);
            margin-top: 20px;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            min-width: 900px;
        }
        
        .admin-table th {
            background: linear-gradient(135deg, var(--primary), var(--danger));
            padding: 20px;
            text-align: right;
            color: white;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            position: sticky;
            top: 0;
        }
        
        .admin-table th:first-child {
            border-top-right-radius: 10px;
        }
        
        .admin-table th:last-child {
            border-top-left-radius: 10px;
        }
        
        .admin-table td {
            padding: 18px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: right;
            word-break: break-word;
            background: rgba(255, 255, 255, 0.02);
        }
        
        .admin-table tr:hover td {
            background: rgba(255, 0, 255, 0.1);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-start;
        }
        
        .delete-btn-small {
            background: linear-gradient(135deg, var(--danger), #ff5500);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }
        
        .delete-btn-small:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }
        
        /* ==================== ÿπÿ±ÿ∂ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ==================== */
        .wishes-container {
            background: rgba(255, 255, 255, 0.03);
            padding: 35px;
            border-radius: 25px;
            border: 3px solid var(--accent);
            box-shadow: var(--shadow-accent);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }
        
        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 35px;
            color: var(--accent);
            font-weight: 900;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }
        
        .section-title::before,
        .section-title::after {
            content: '‚ú¶';
            font-size: 2rem;
            color: var(--accent);
            animation: spin 4s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .year-selection {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 2px solid var(--info);
            text-align: center;
        }
        
        .year-selection h3 {
            color: var(--info);
            margin-bottom: 20px;
            font-size: 1.6rem;
            font-weight: 700;
        }
        
        .year-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }
        
        .year-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid var(--info);
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .year-btn:hover,
        .year-btn.active {
            background: linear-gradient(135deg, var(--info), var(--secondary));
            color: var(--dark);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 170, 255, 0.3);
        }
        
        .wishes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }
        
        .wish-card {
            background: linear-gradient(135deg, 
                rgba(255, 0, 255, 0.1), 
                rgba(0, 255, 255, 0.1));
            border-radius: 20px;
            padding: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }
        
        .wish-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--primary);
            box-shadow: var(--shadow-neon);
        }
        
        .wish-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .wish-card:hover::before {
            opacity: 1;
        }
        
        .wish-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .wish-name {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .wish-year {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            color: var(--accent);
            font-size: 1.1rem;
            border: 2px solid var(--accent);
        }
        
        .wish-text {
            line-height: 1.8;
            font-size: 1.2rem;
            margin-bottom: 25px;
            color: rgba(255, 255, 255, 0.95);
            word-break: break-word;
            text-align: right;
        }
        
        .wish-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .wish-date {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .delete-wish-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 0, 0, 0.2);
            color: #ff5555;
            border: 2px solid #ff5555;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s;
            font-size: 1.2rem;
        }
        
        .wish-card:hover .delete-wish-btn {
            opacity: 1;
        }
        
        .delete-wish-btn:hover {
            background: rgba(255, 0, 0, 0.4);
            color: white;
            transform: scale(1.1);
        }
        
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            grid-column: 1 / -1;
        }
        
        .empty-state i {
            font-size: 6rem;
            color: var(--primary);
            margin-bottom: 25px;
            opacity: 0.5;
        }
        
        .empty-state p {
            font-size: 1.8rem;
            opacity: 0.7;
            margin-bottom: 30px;
        }
        
        .empty-state .action-btn {
            background: var(--gradient-primary);
            color: var(--dark);
            border: none;
            padding: 15px 35px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .empty-state .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-neon);
        }
        
        /* ==================== ŸÜŸÖŸàÿ∞ÿ¨ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿ© ==================== */
        .wish-form {
            background: linear-gradient(135deg, 
                rgba(0, 255, 255, 0.1), 
                rgba(0, 170, 255, 0.1));
            padding: 35px;
            border-radius: 25px;
            margin-bottom: 40px;
            border: 3px solid var(--secondary);
            box-shadow: var(--shadow-secondary);
            position: relative;
            overflow: hidden;
        }
        
        .form-title {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 30px;
            color: var(--secondary);
            font-weight: 900;
        }
        
        .character-count {
            text-align: left;
            margin-top: 10px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
        }
        
        .character-count.warning {
            color: var(--accent);
        }
        
        .character-count.danger {
            color: var(--danger);
        }
        
        .submit-btn {
            width: 100%;
            padding: 20px;
            background: var(--gradient-secondary);
            color: var(--dark);
            font-weight: 800;
            font-size: 1.5rem;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .submit-btn:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: var(--shadow-secondary);
        }
        
        .submit-btn:disabled {
            background: linear-gradient(135deg, #555555, #777777);
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* ==================== ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ™ÿ£ŸÉŸäÿØ ==================== */
        .confirmation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .confirmation-box {
            background: linear-gradient(135deg, #1a0b2e, #0c0c0c);
            padding: 50px;
            border-radius: 30px;
            border: 3px solid var(--danger);
            box-shadow: 0 0 50px var(--danger);
            max-width: 600px;
            width: 90%;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .confirmation-box::before {
            content: '‚ö†Ô∏è';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 4rem;
            opacity: 0.2;
        }
        
        .confirmation-text {
            font-size: 1.8rem;
            margin-bottom: 40px;
            color: var(--secondary);
            line-height: 1.6;
        }
        
        .confirmation-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        
        .confirm-btn {
            padding: 18px 40px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3rem;
            font-weight: 700;
            border: none;
            transition: all 0.3s;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .confirm-btn.delete {
            background: var(--gradient-danger);
            color: white;
        }
        
        .confirm-btn.delete:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 0, 0, 0.4);
        }
        
        .confirm-btn.cancel {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid var(--secondary);
        }
        
        .confirm-btn.cancel:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateY(-5px);
        }
        
        /* ==================== ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™ŸÜÿ®ŸäŸá ==================== */
        .alert-message {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 20px 35px;
            border-radius: 15px;
            font-weight: 700;
            z-index: 10001;
            animation: slideDown 0.4s ease-out;
            max-width: 90%;
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
            border: 2px solid;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateX(-50%) translateY(-100px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        .alert-message.success {
            background: linear-gradient(135deg, rgba(0, 255, 0, 0.9), rgba(0, 200, 0, 0.9));
            color: var(--dark);
            border-color: #00ff00;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.5);
        }
        
        .alert-message.error {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.9), rgba(200, 0, 0, 0.9));
            color: white;
            border-color: var(--danger);
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
        }
        
        .alert-message.info {
            background: linear-gradient(135deg, rgba(0, 170, 255, 0.9), rgba(0, 140, 255, 0.9));
            color: white;
            border-color: var(--info);
            box-shadow: 0 0 30px rgba(0, 170, 255, 0.5);
        }
        
        .alert-message.warning {
            background: linear-gradient(135deg, rgba(255, 200, 0, 0.9), rgba(255, 150, 0, 0.9));
            color: var(--dark);
            border-color: var(--accent);
            box-shadow: 0 0 30px rgba(255, 200, 0, 0.5);
        }
        
        /* ==================== ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ==================== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 5px solid transparent;
            border-top: 5px solid var(--primary);
            border-right: 5px solid var(--secondary);
            border-bottom: 5px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }
        
        .loading-text {
            font-size: 1.5rem;
            color: var(--secondary);
            font-weight: 600;
            animation: pulse 1.5s infinite;
        }
        
        /* ==================== ÿßŸÑÿ™ÿ∞ŸäŸäŸÑ ==================== */
        .footer {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 50px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer p {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .footer .heart {
            color: var(--danger);
            animation: heartbeat 1.5s infinite;
            display: inline-block;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* ==================== ÿßŸÑÿ™ÿ¨ÿßŸàÿ® ==================== */
        @media (max-width: 1200px) {
            .main-title { font-size: 3.5rem; }
            .wishes-grid { grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); }
        }
        
        @media (max-width: 992px) {
            .header-content { flex-direction: column; text-align: center; }
            .user-info { flex-direction: column; }
            .main-title { font-size: 3rem; }
            .date-check-box, .login-box { padding: 40px 30px; }
        }
        
        @media (max-width: 768px) {
            .main-title { font-size: 2.5rem; }
            .countdown { gap: 15px; }
            .countdown-item { min-width: 90px; }
            .countdown-number { font-size: 2.8rem; }
            .access-buttons { grid-template-columns: 1fr; }
            .wishes-grid { grid-template-columns: 1fr; }
            .confirmation-buttons { flex-direction: column; }
            .admin-table-container { padding: 10px; }
            .year-buttons { flex-direction: column; }
            .section-title { font-size: 2rem; flex-direction: column; gap: 10px; }
            .section-title::before, .section-title::after { display: none; }
        }
        
        @media (max-width: 480px) {
            .main-title { font-size: 2rem; }
            .countdown-number { font-size: 2.2rem; }
            .current-date { font-size: 1.8rem; flex-direction: column; gap: 10px; }
            .date-check-box, .login-box { padding: 30px 20px; }
            .input-field, textarea.input-field { padding: 15px; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- ÿßŸÑŸÜÿ¨ŸàŸÖ ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ© -->
    <div class="stars" id="stars"></div>
    
    <!-- ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</div>
    </div>
    
    <!-- ÿ±ÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™ŸÜÿ®ŸäŸá -->
    <div id="alertMessage" class="alert-message" style="display: none;"></div>
    
    <!-- ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ -->
    <div class="date-check-screen" id="dateCheckScreen">
        <div class="date-check-box">
            <h1 class="main-title">
                <span class="neon-text" data-text="‚ú® ÿ£ŸÖŸÜŸäÿßÿ™ ŸäŸÜÿßŸäÿ± ‚ú®">‚ú® ÿ£ŸÖŸÜŸäÿßÿ™ ŸäŸÜÿßŸäÿ± ‚ú®</span>
            </h1>
            
            <div class="subtitle">
                <p>ŸÖŸàŸÇÿπ ÿÆÿßÿµ ÿ®ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿπÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØ</p>
                <p>ŸäŸÅÿ™ÿ≠ <strong>ÿ∑ŸàÿßŸÑ ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ±</strong> ŸÖŸÜ ŸÉŸÑ ÿ≥ŸÜÿ©</p>
                <p>ŸäŸÖŸÉŸÜ ŸÑŸÉŸÑ ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÉÿ™ÿßÿ®ÿ© <strong>ÿ£ŸÖŸÜŸäÿ© Ÿàÿßÿ≠ÿØÿ© ŸÅŸÇÿ∑</strong> ŸÅŸä ÿßŸÑÿ≥ŸÜÿ©</p>
                <p style="color: var(--accent); margin-top: 20px; font-size: 1.3rem;">
                    <i class="fas fa-magic"></i> ÿßŸÉÿ™ÿ® ÿ£ŸÖŸÜŸäÿ™ŸÉ... Ÿàÿßÿ™ÿ±ŸÉ ÿßŸÑÿ®ÿßŸÇŸä ÿπŸÑŸâ ÿßŸÑŸÜÿ¨ŸàŸÖ ‚ú®
                </p>
            </div>
            
            <div class="date-info">
                <div class="current-date">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="currentDate">ÿ¨ÿßÿ±Ÿç ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ...</span>
                </div>
                
                <div class="next-closing" id="nextClosing">
                    ÿßŸÑÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÇÿßÿØŸÖ: ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...
                </div>
                
                <div class="countdown-container">
                    <div class="countdown-title">
                        <i class="fas fa-hourglass-half"></i> ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä
                    </div>
                    <div class="countdown" id="countdown">
                        <div class="countdown-item">
                            <div class="countdown-number" id="days">00</div>
                            <div class="countdown-label">ÿ£ŸäÿßŸÖ</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-number" id="hours">00</div>
                            <div class="countdown-label">ÿ≥ÿßÿπÿßÿ™</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-number" id="minutes">00</div>
                            <div class="countdown-label">ÿØŸÇÿßÿ¶ŸÇ</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-number" id="seconds">00</div>
                            <div class="countdown-label">ÿ´ŸàÿßŸÜŸä</div>
                        </div>
                    </div>
                </div>
                
                <div class="month-progress-container">
                    <div class="month-progress-label">
                        <span>ÿ™ŸÇÿØŸÖ ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ±</span>
                        <span id="progressPercentage">0%</span>
                    </div>
                    <div class="month-progress">
                        <div class="month-progress-bar" id="monthProgressBar" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progressText">
                        ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥Ÿáÿ±...
                    </div>
                </div>
                
                <div class="days-remaining">
                    <i class="fas fa-star"></i>
                    <span id="daysRemaining">...</span>
                    <i class="fas fa-star"></i>
                </div>
            </div>
            
            <div class="message-box" id="dateMessage">
                <i class="fas fa-calendar-check" id="dateIcon"></i>
                <h3 id="dateStatusTitle">ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ...</h3>
                <p id="dateStatusText">ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ± ÿ®ŸäŸÜŸÖÿß ŸÜÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ™ŸàÿßŸÅŸÇ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</p>
            </div>
            
            <div class="access-buttons" id="accessButtons" style="display: none;">
                <button class="access-btn" onclick="showUserLogin()">
                    <i class="fas fa-feather-alt"></i>
                    <span>ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ© ÿ¨ÿØŸäÿØÿ© ‚ú®</span>
                </button>
                
                <button class="access-btn view-btn" onclick="showViewOldWishes()">
                    <i class="fas fa-history"></i>
                    <span>ŸÖÿ¥ÿßŸáÿØÿ© ÿ£ŸÖŸÜŸäÿßÿ™Ÿä ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©</span>
                </button>
                
                <button class="access-btn admin-btn" onclick="showAdminLogin()">
                    <i class="fas fa-crown"></i>
                    <span>ÿØÿÆŸàŸÑ ŸÉŸÖÿØŸäÿ± üëë</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- ÿ¥ÿßÿ¥ÿ© ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ -->
    <div class="login-screen" id="loginScreen">
        <div class="login-box">
            <h1 class="login-title">‚ú® ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ© ÿ¨ÿØŸäÿØÿ© ‚ú®</h1>
            
            <div class="month-status" id="loginMonthStatus">
                <h2><i class="fas fa-calendar-star"></i> ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± <span id="loginYear"></span></h2>
                <p id="loginMonthText">ÿ¨ÿßÿ±Ÿç ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥Ÿáÿ±...</p>
            </div>
            
            <div class="input-group">
                <label class="input-label">
                    <i class="fas fa-user-circle"></i> ÿßÿ≥ŸÖŸÉ ÿßŸÑŸÉÿ±ŸäŸÖ
                </label>
                <input type="text" id="userName" class="input-field" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ÿßŸÑÿ≠ŸÇŸäŸÇŸä ÿ£Ÿà ÿßŸÑŸÖÿ≥ÿ™ÿπÿßÿ±" required>
            </div>
            
            <div class="input-group">
                <label class="input-label">
                    <i class="fas fa-star"></i> ÿ£ŸÖŸÜŸäÿ™ŸÉ ŸÑŸÑÿπÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØ
                </label>
                <textarea id="wishText" class="input-field" 
                    placeholder="ŸÖÿß ŸáŸä ÿ£ŸÖŸÜŸäÿ™ŸÉ ŸÑŸÑÿπÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØÿü ÿßŸÉÿ™ÿ®Ÿáÿß ŸáŸÜÿß ÿ®ÿ•Ÿäÿ¨ÿßÿ®Ÿäÿ© Ÿàÿ•ŸäŸÖÿßŸÜ... ‚ú®" 
                    rows="6" required></textarea>
                <div class="character-count" id="charCount">0/500</div>
            </div>
            
            <div class="info-text">
                <i class="fas fa-info-circle"></i>
                ŸäŸÖŸÉŸÜŸÉ ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ© Ÿàÿßÿ≠ÿØÿ© ŸÅŸÇÿ∑ ÿÆŸÑÿßŸÑ ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ŸÖŸÜ ŸÉŸÑ ÿ≥ŸÜÿ©. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿµŸäÿßÿ∫ÿ© ÿ£ŸÖŸÜŸäÿ© ÿ¨ŸÖŸäŸÑÿ© ŸàŸÖÿ§ÿ´ÿ±ÿ©!
            </div>
            
            <button class="login-btn" onclick="submitNewWish()" id="submitWishBtn">
                <i class="fas fa-paper-plane"></i> ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿ© ÿ•ŸÑŸâ ÿßŸÑŸÜÿ¨ŸàŸÖ ‚ú®
            </button>
            
            <button class="back-btn" onclick="backToDateCheck()">
                <i class="fas fa-arrow-right"></i> ÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
            </button>
        </div>
    </div>
    
    <!-- ÿ¥ÿßÿ¥ÿ© ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ© -->
    <div class="login-screen" id="viewOldWishesScreen">
        <div class="login-box">
            <h1 class="login-title">üìú ÿ£ŸÖŸÜŸäÿßÿ™ŸÉ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©</h1>
            
            <div class="info-text">
                <i class="fas fa-history"></i>
                ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ŸÑŸÖÿ¥ÿßŸáÿØÿ© ÿ¨ŸÖŸäÿπ ÿ£ŸÖŸÜŸäÿßÿ™ŸÉ ŸÅŸä ÿßŸÑÿ≥ŸÜŸàÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©. ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿÆÿßÿµÿ© ÿ®ŸÉ ŸàŸÑÿß Ÿäÿ±ÿßŸáÿß ÿ£ÿ≠ÿØ ÿ∫Ÿäÿ±ŸÉ.
            </div>
            
            <div class="input-group">
                <label class="input-label">
                    <i class="fas fa-user-circle"></i> ÿßÿ≥ŸÖŸÉ ÿßŸÑŸÉÿ±ŸäŸÖ
                </label>
                <input type="text" id="oldWishesName" class="input-field" 
                    placeholder="ÿ£ÿØÿÆŸÑ ŸÜŸÅÿ≥ ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ∞Ÿä ÿßÿ≥ÿ™ÿÆÿØŸÖÿ™Ÿá ÿ≥ÿßÿ®ŸÇÿßŸã" required>
            </div>
            
            <button class="login-btn" onclick="viewOldWishes()">
                <i class="fas fa-eye"></i> ÿπÿ±ÿ∂ ÿ£ŸÖŸÜŸäÿßÿ™Ÿä ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©
            </button>
            
            <button class="back-btn" onclick="backToDateCheck()">
                <i class="fas fa-arrow-right"></i> ÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
            </button>
        </div>
    </div>
    
    <!-- ÿ¥ÿßÿ¥ÿ© ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿØŸäÿ± -->
    <div class="login-screen" id="adminLoginScreen">
        <div class="login-box">
            <h1 class="login-title">üëë ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿØŸäÿ±</h1>
            
            <div class="info-text">
                <i class="fas fa-shield-alt"></i>
                ÿßŸÑŸÖÿØŸäÿ± Ÿäÿ≥ÿ™ÿ∑Ÿäÿπ ÿ±ÿ§Ÿäÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ Ÿàÿ•ÿØÿßÿ±ÿ™Ÿáÿß ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™ ŸÖŸÜ ÿßŸÑÿ≥ŸÜÿ©.
            </div>
            
            <div class="input-group">
                <label class="input-label">
                    <i class="fas fa-key"></i> ŸÉŸÑŸÖÿ© ÿ≥ÿ± ÿßŸÑŸÖÿØŸäÿ±
                </label>
                <input type="password" id="adminPassword" class="input-field" 
                    placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ÿßŸÑÿÆÿßÿµÿ© ÿ®ÿßŸÑŸÖÿØŸäÿ±" required>
            </div>
            
            <button class="login-btn" onclick="loginAsAdmin()">
                <i class="fas fa-crown"></i> ÿØÿÆŸàŸÑ ŸÉŸÖÿØŸäÿ±
            </button>
            
            <button class="back-btn" onclick="backToDateCheck()">
                <i class="fas fa-arrow-right"></i> ÿ±ÿ¨Ÿàÿπ ÿ•ŸÑŸâ ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
            </button>
        </div>
    </div>
    
    <!-- ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä -->
    <div class="container main-app" id="mainApp">
        <!-- ÿßŸÑŸáŸäÿØÿ± -->
        <div class="header">
            <div class="header-content">
                <div class="site-title">
                    <h1>‚ú® ÿ£ŸÖŸÜŸäÿßÿ™ ŸäŸÜÿßŸäÿ± ‚ú®</h1>
                    <p>ŸÖŸàŸÇÿπ ŸäŸÅÿ™ÿ≠ ÿ∑ŸàÿßŸÑ ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ŸÖŸÜ ŸÉŸÑ ÿ≥ŸÜÿ©</p>
                </div>
                
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">?</div>
                    <div class="user-details">
                        <h3 id="userDisplayName">ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ</h3>
                        <p id="userRole">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</p>
                        <div class="user-badges" id="userBadges">
                            <!-- ÿ≥Ÿäÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ÿßÿ¨ÿßÿ™ ŸáŸÜÿß -->
                        </div>
                    </div>
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥Ÿáÿ± -->
        <div class="month-status" id="monthStatusBox">
            <h2><i class="fas fa-calendar-alt" id="monthIcon"></i> <span id="monthTitle">ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ±</span></h2>
            <p id="monthText">ÿ¨ÿßÿ±Ÿç ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</p>
        </div>
        
        <!-- ŸÜŸÖŸàÿ∞ÿ¨ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿ© (Ÿäÿ∏Ÿáÿ± ŸÅŸÇÿ∑ ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿßŸÑÿπÿßÿØŸäŸäŸÜ ŸÅŸä ŸäŸÜÿßŸäÿ±) -->
        <div class="wish-form" id="wishForm" style="display: none;">
            <h2 class="form-title"><i class="fas fa-feather-alt"></i> ÿßŸÉÿ™ÿ® ÿ£ŸÖŸÜŸäÿ™ŸÉ ŸÑŸÑÿπÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØ</h2>
            
            <div class="input-group">
                <label class="input-label">
                    <i class="fas fa-star"></i> ÿ£ŸÖŸÜŸäÿ™ŸÉ ‚ú®
                </label>
                <textarea id="newWishText" class="input-field" 
                    placeholder="ŸÖÿß ŸáŸä ÿ£ŸÖŸÜŸäÿ™ŸÉ ŸÑŸÑÿπÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØÿü ÿßŸÉÿ™ÿ®Ÿáÿß ŸáŸÜÿß ÿ®ÿ™ŸÅÿßÿ§ŸÑ Ÿàÿ•ŸäŸÖÿßŸÜ..." 
                    rows="5" required></textarea>
                <div class="character-count" id="newCharCount">0/500</div>
            </div>
            
            <button class="submit-btn" onclick="submitWishFromApp()" id="submitNewWishBtn">
                <i class="fas fa-paper-plane"></i> ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿ©
            </button>
        </div>
        
        <!-- ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ≥ŸÜÿ© (ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿßŸÑÿ∞ŸäŸÜ Ÿäÿ¥ÿßŸáÿØŸàŸÜ ÿ£ŸÖŸÜŸäÿßÿ™ŸáŸÖ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©) -->
        <div class="year-selection" id="yearSelection" style="display: none;">
            <h3><i class="fas fa-calendar-check"></i> ÿßÿÆÿ™ÿ± ÿ≥ŸÜÿ© ŸÑŸÖÿ¥ÿßŸáÿØÿ© ÿ£ŸÖŸÜŸäÿßÿ™Ÿáÿß</h3>
            <div class="year-buttons" id="yearButtons">
                <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿ®ÿßŸÑÿ≥ŸÜŸàÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ© -->
            </div>
        </div>
        
        <!-- ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖÿØŸäÿ± -->
        <div class="admin-panel" id="adminPanel">
            <h2 class="admin-title">üëë ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿØŸäÿ±</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-star"></i>
                    <div class="stat-number" id="totalWishes">0</div>
                    <div class="stat-label">ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-calendar-alt"></i>
                    <div class="stat-number" id="totalYears">0</div>
                    <div class="stat-label">ÿßŸÑÿ≥ŸÜŸàÿßÿ™</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-users"></i>
                    <div class="stat-number" id="totalUsers">0</div>
                    <div class="stat-label">ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-crown"></i>
                    <div class="stat-number">ŸÖÿØŸäÿ±</div>
                    <div class="stat-label">ÿµŸÑÿßÿ≠Ÿäÿßÿ™ ŸÉÿßŸÖŸÑÿ©</div>
                </div>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <p style="color: var(--secondary); font-size: 1.2rem;">
                    <i class="fas fa-eye"></i> ÿ£ŸÜÿ™ ÿ™ÿ¥ÿßŸáÿØ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ŸÉŸÖÿØŸäÿ± ŸÑŸÑŸÜÿ∏ÿßŸÖ
                </p>
            </div>
            
            <button class="clear-all-btn" onclick="showClearAllConfirmation()">
                <i class="fas fa-trash-alt"></i> ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™
            </button>
            
            <div class="admin-table-container">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ÿßŸÑÿßÿ≥ŸÖ</th>
                            <th>ÿßŸÑÿ£ŸÖŸÜŸäÿ©</th>
                            <th>ÿßŸÑÿ≥ŸÜÿ©</th>
                            <th>ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</th>
                            <th>ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™</th>
                        </tr>
                    </thead>
                    <tbody id="adminTableBody">
                        <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿ®ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- ÿπÿ±ÿ∂ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ -->
        <div class="wishes-container" id="wishesContainer">
            <h2 class="section-title" id="wishesTitle">
                <i class="fas fa-gifts"></i>
                <span id="wishesTitleText">ÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ŸÜÿ©</span>
            </h2>
            
            <div class="wishes-grid" id="wishesGrid">
                <div class="empty-state" id="emptyState">
                    <i class="fas fa-gifts"></i>
                    <p id="emptyStateText">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÖŸÜŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ®ÿπÿØ</p>
                    <button class="action-btn" onclick="showUserLogin()" id="firstWishBtn" style="display: none;">
                        ŸÉŸÜ ÿ£ŸàŸÑ ŸÖŸÜ ŸäŸÉÿ™ÿ® ÿ£ŸÖŸÜŸäÿ© ‚ú®
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ÿßŸÑÿ™ÿ∞ŸäŸäŸÑ -->
        <div class="footer">
            <p>‚ú® ÿ£ŸÖŸÜŸäÿßÿ™ ŸäŸÜÿßŸäÿ± ‚ú® - ŸÖŸàŸÇÿπ ŸäŸÅÿ™ÿ≠ ÿ∑ŸàÿßŸÑ ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ŸÖŸÜ ŸÉŸÑ ÿ≥ŸÜÿ©</p>
            <p>ŸÉŸÑ ÿπÿßŸÖ Ÿàÿ£ŸÜÿ™ŸÖ ÿ®ÿ£ŸÑŸÅ ÿÆŸäÿ± <span class="heart">‚ù§Ô∏è</span></p>
            <p style="font-size: 0.9rem; margin-top: 20px; color: rgba(255,255,255,0.4);">
                ÿ™ŸÖ ÿßŸÑÿ™ÿ∑ŸàŸäÿ± ÿ®ŸÄ <i class="fas fa-heart" style="color: var(--danger);"></i> | ÿßŸÑÿ•ÿµÿØÿßÿ± 1.0.0
            </p>
        </div>
    </div>

    <!-- ŸÜÿßŸÅÿ∞ÿ© ÿßŸÑÿ™ÿ£ŸÉŸäÿØ -->
    <div id="confirmationModal" class="confirmation-modal">
        <div class="confirmation-box">
            <div class="confirmation-text" id="confirmationText">
                ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑÿ£ŸÖŸÜŸäÿ©ÿü
            </div>
            <div class="confirmation-buttons">
                <button class="confirm-btn delete" onclick="confirmDelete()">
                    <i class="fas fa-trash-alt"></i> ŸÜÿπŸÖÿå ÿßÿ≠ÿ∞ŸÅ
                </button>
                <button class="confirm-btn cancel" onclick="cancelDelete()">
                    <i class="fas fa-times"></i> ÿ•ŸÑÿ∫ÿßÿ°
                </button>
            </div>
        </div>
    </div>

    <!-- ŸÜÿßŸÅÿ∞ÿ© ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑŸÖÿ≥ÿ≠ ÿßŸÑŸÉÿßŸÖŸÑ -->
    <div id="clearAllModal" class="confirmation-modal" style="display: none;">
        <div class="confirmation-box">
            <div class="confirmation-text" id="clearAllText">
                ‚ö†Ô∏è ÿ™ÿ≠ÿ∞Ÿäÿ±: ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ÿü<br>
                Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜŸá Ÿàÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ŸÜŸáÿßÿ¶ŸäÿßŸã!
            </div>
            <div class="confirmation-buttons">
                <button class="confirm-btn delete" onclick="confirmClearAll()">
                    <i class="fas fa-fire"></i> ŸÜÿπŸÖÿå ÿßŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸÑ
                </button>
                <button class="confirm-btn cancel" onclick="cancelClearAll()">
                    <i class="fas fa-times"></i> ÿ•ŸÑÿ∫ÿßÿ°
                </button>
            </div>
        </div>
    </div>

    <script>
    // =================== FIREBASE CONFIG ===================
    const firebaseConfig = {
        apiKey: "AIzaSyATUn0oNQsY9JG42qBhxGXAYJQiChANgF0",
        authDomain: "january-wish.firebaseapp.com",
        databaseURL: "https://january-wish-default-rtdb.firebaseio.com",
        projectId: "january-wish",
        storageBucket: "january-wish.firebasestorage.app",
        messagingSenderId: "31123732054",
        appId: "1:31123732054:web:b5c1e965702b2554f3edf7",
        measurementId: "G-MBJGST5TFK"
    };
    
    // =================== ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ© ===================
    let database;
    let auth;
    let currentUser = {
        name: '',
        type: 'user', // user, admin, viewer
        viewingMode: false,
        currentYear: new Date().getFullYear(),
        uid: null
    };
    
    const ADMIN_PASSWORDS = {
        "admin2025": true,
        "admin@january": true,
        "january_wishes_admin": true,
        "ÿßŸÑÿ≥ŸÑÿßŸÖ_ÿπŸÑŸäŸÉŸÖ_2024": true
    };
    
    let wishToDelete = null;
    let deleteAllMode = false;
    let wishesMap = new Map();
    let selectedYear = new Date().getFullYear();
    let isFirebaseInitialized = false;
    let dateCheckInterval = null;
    let starsInterval = null;
    
    // =================== ÿØŸàÿßŸÑ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ===================
    function showAlert(message, type = 'info', duration = 5000) {
        const alertDiv = document.getElementById('alertMessage');
        alertDiv.innerHTML = `<i class="fas fa-${getAlertIcon(type)}"></i> ${message}`;
        alertDiv.className = `alert-message ${type}`;
        alertDiv.style.display = 'flex';
        
        setTimeout(() => {
            alertDiv.style.display = 'none';
        }, duration);
    }
    
    function getAlertIcon(type) {
        switch(type) {
            case 'success': return 'check-circle';
            case 'error': return 'exclamation-circle';
            case 'warning': return 'exclamation-triangle';
            default: return 'info-circle';
        }
    }
    
    function showLoading(show) {
        document.getElementById('loadingScreen').style.display = show ? 'flex' : 'none';
    }
    
    function createStars() {
        const starsContainer = document.getElementById('stars');
        starsContainer.innerHTML = '';
        
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            
            const size = Math.random() * 3 + 1;
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const duration = Math.random() * 3 + 2;
            
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.left = `${x}%`;
            star.style.top = `${y}%`;
            star.style.opacity = Math.random() * 0.7 + 0.3;
            star.style.setProperty('--duration', `${duration}s`);
            star.style.animationDelay = `${Math.random() * 5}s`;
            
            starsContainer.appendChild(star);
        }
    }
    
    // =================== ÿ™ŸáŸäÿ¶ÿ© Firebase ===================
    function initializeFirebase() {
        try {
            console.log("üöÄ ÿ¨ÿßÿ±Ÿä ÿ™ŸáŸäÿ¶ÿ© Firebase...");
            
            if (firebase.apps.length === 0) {
                firebase.initializeApp(firebaseConfig);
                console.log("‚úÖ Firebase initialized successfully");
            }
            
            database = firebase.database();
            auth = firebase.auth();
            isFirebaseInitialized = true;
            
            // ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ
            const testRef = database.ref('.info/connected');
            testRef.on('value', (snapshot) => {
                if (snapshot.val() === true) {
                    console.log("‚úÖ ŸÖÿ™ÿµŸÑ ÿ®ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™");
                    showAlert("ÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÜÿ¨ÿßÿ¨ ÿ®ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™", "success", 2000);
                } else {
                    console.log("‚ùå ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™");
                }
            });
            
            return true;
            
        } catch (error) {
            console.error("‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ŸáŸäÿ¶ÿ© Firebase:", error);
            showAlert("ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™", "error");
            return false;
        }
    }
    
    // =================== ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ===================
    function checkDate() {
        try {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentDate = now.getDate();
            const currentYear = now.getFullYear();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentSecond = now.getSeconds();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ≠ÿßŸÑŸä
            const dateStr = `${currentDate}/${currentMonth + 1}/${currentYear}`;
            const timeStr = `${currentHour.toString().padStart(2, '0')}:${currentMinute.toString().padStart(2, '0')}:${currentSecond.toString().padStart(2, '0')}`;
            document.getElementById('currentDate').textContent = `ÿßŸÑŸäŸàŸÖ: ${dateStr} - ${timeStr}`;
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿØÿßÿÆŸÑ ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ±
            const isJanuary = (currentMonth === 0);
            
            // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ŸäÿßŸÖ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©
            let targetDate;
            let statusTitle = '';
            let statusText = '';
            let statusIcon = '';
            let statusColor = '';
            
            if (isJanuary) {
                // ŸÜÿ≠ŸÜ ŸÅŸä ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ±
                targetDate = new Date(currentYear, 0, 31, 23, 59, 59);
                const timeDiff = targetDate - now;
                
                const daysRemaining = Math.max(0, Math.ceil(timeDiff / (1000 * 60 * 60 * 24)));
                
                statusTitle = 'ÿßŸÑŸÖŸàŸÇÿπ ŸÖŸÅÿ™Ÿàÿ≠ ÿßŸÑÿ¢ŸÜ! ‚ú®';
                statusText = `ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ${currentYear} - ŸäŸÖŸÉŸÜŸÉ ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ© ÿ¨ÿØŸäÿØÿ© ŸÑŸÑÿπÿßŸÖ ÿßŸÑÿ¨ÿØŸäÿØ`;
                statusIcon = 'fa-door-open';
                statusColor = '#00ff00';
                
                document.getElementById('accessButtons').style.display = 'grid';
                document.getElementById('dateStatusTitle').style.color = statusColor;
                
            } else {
                // ŸÜÿ≠ŸÜ ÿÆÿßÿ±ÿ¨ ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ±
                let nextJanuaryFirst;
                if (currentMonth === 0 && currentDate > 1) {
                    nextJanuaryFirst = new Date(currentYear + 1, 0, 1);
                } else {
                    nextJanuaryFirst = new Date(currentYear, 0, 1);
                }
                
                targetDate = nextJanuaryFirst;
                const timeDiff = targetDate - now;
                const daysRemaining = Math.max(0, Math.ceil(timeDiff / (1000 * 60 * 60 * 24)));
                
                statusTitle = 'ÿßŸÑŸÖŸàŸÇÿπ ŸÖÿ∫ŸÑŸÇ ÿ≠ÿßŸÑŸäÿßŸã üîí';
                statusText = `ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ÿßŸÜÿ™ŸáŸâ. ŸäŸÖŸÉŸÜŸÉ ŸÅŸÇÿ∑ ŸÖÿ¥ÿßŸáÿØÿ© ÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ŸÜŸàÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©. ÿßŸÑŸÖŸàŸÇÿπ ŸäŸÅÿ™ÿ≠ ŸÅŸä ŸäŸÜÿßŸäÿ± ÿßŸÑŸÇÿßÿØŸÖ.`;
                statusIcon = 'fa-door-closed';
                statusColor = '#ff0000';
                
                document.getElementById('accessButtons').style.display = 'grid';
                document.getElementById('dateStatusTitle').style.color = statusColor;
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ
            document.getElementById('dateIcon').className = `fas ${statusIcon}`;
            document.getElementById('dateStatusTitle').textContent = statusTitle;
            document.getElementById('dateStatusText').textContent = statusText;
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿØ ÿßŸÑÿ™ŸÜÿßÿ≤ŸÑŸä
            updateCountdown(targetDate);
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÜÿ≥ÿ®ÿ© ÿßŸÑÿ™ŸÇÿØŸÖ ŸÅŸä ÿßŸÑÿ¥Ÿáÿ±
            if (isJanuary) {
                const startOfJanuary = new Date(currentYear, 0, 1);
                const endOfJanuary = new Date(currentYear, 0, 31, 23, 59, 59);
                const totalJanuaryTime = endOfJanuary - startOfJanuary;
                const elapsedTime = now - startOfJanuary;
                const progressPercentage = Math.min(100, Math.max(0, (elapsedTime / totalJanuaryTime) * 100));
                
                document.getElementById('monthProgressBar').style.width = `${progressPercentage}%`;
                document.getElementById('monthProgressBar').textContent = `${Math.round(progressPercentage)}%`;
                document.getElementById('progressPercentage').textContent = `${Math.round(progressPercentage)}%`;
                document.getElementById('progressText').textContent = `ÿ™ŸÇÿØŸÖ ÿßŸÑÿ¥Ÿáÿ±: ${Math.round(progressPercentage)}%`;
                
                const daysRemaining = Math.ceil((endOfJanuary - now) / (1000 * 60 * 60 * 24));
                document.getElementById('daysRemaining').textContent = `${daysRemaining} ŸäŸàŸÖ ŸÖÿ™ÿ®ŸÇŸä`;
                
                // ÿ™ÿ≠ÿØŸäÿ´ ŸÜÿµ ÿßŸÑÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÇÿßÿØŸÖ
                document.getElementById('nextClosing').textContent = `ÿßŸÑÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÇÿßÿØŸÖ: ŸÜŸáÿßŸäÿ© ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ${currentYear}`;
                
            } else {
                document.getElementById('monthProgressBar').style.width = '0%';
                document.getElementById('monthProgressBar').textContent = '0%';
                document.getElementById('progressPercentage').textContent = '0%';
                document.getElementById('progressText').textContent = 'ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑ ÿ≠ÿßŸÑŸäÿßŸã';
                
                const nextJanYear = currentMonth === 0 && currentDate > 1 ? currentYear + 1 : currentYear;
                document.getElementById('nextClosing').textContent = `ÿßŸÑŸÅÿ™ÿ≠ ÿßŸÑŸÇÿßÿØŸÖ: 1 ŸäŸÜÿßŸäÿ± ${nextJanYear}`;
            }
            
        } catch (error) {
            console.error("‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:", error);
            showAlert("ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ", "error");
        }
    }
    
    function updateCountdown(targetDate) {
        const now = new Date();
        const timeDiff = targetDate - now;
        
        if (timeDiff <= 0) {
            document.getElementById('days').textContent = '00';
            document.getElementById('hours').textContent = '00';
            document.getElementById('minutes').textContent = '00';
            document.getElementById('seconds').textContent = '00';
            return;
        }
        
        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
        
        document.getElementById('days').textContent = days.toString().padStart(2, '0');
        document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
    }
    
    function startDateCheck() {
        checkDate();
        
        if (dateCheckInterval) {
            clearInterval(dateCheckInterval);
        }
        
        dateCheckInterval = setInterval(checkDate, 1000);
    }
    
    // =================== Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ===================
    function showUserLogin() {
        const now = new Date();
        const isJanuary = (now.getMonth() === 0);
        
        if (!isJanuary) {
            showAlert('‚ùå ÿßŸÑŸÖŸàŸÇÿπ ŸÖÿ∫ŸÑŸÇ ÿ≠ÿßŸÑŸäÿßŸã! ŸäŸÖŸÉŸÜŸÉ ŸÅŸÇÿ∑ ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©.', 'warning');
            return;
        }
        
        document.getElementById('dateCheckScreen').style.display = 'none';
        document.getElementById('loginScreen').style.display = 'flex';
        document.getElementById('loginYear').textContent = now.getFullYear();
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥Ÿáÿ± ŸÅŸä ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿØÿÆŸàŸÑ
        updateLoginMonthStatus();
        
        // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπ ŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ÿ≠ÿ±ŸÅ
        const wishText = document.getElementById('wishText');
        const charCount = document.getElementById('charCount');
        
        wishText.addEventListener('input', function() {
            const length = this.value.length;
            charCount.textContent = `${length}/500`;
            
            if (length > 450) {
                charCount.className = 'character-count warning';
            } else if (length > 500) {
                charCount.className = 'character-count danger';
            } else {
                charCount.className = 'character-count';
            }
        });
        
        document.getElementById('userName').focus();
    }
    
    function updateLoginMonthStatus() {
        const now = new Date();
        const isJanuary = (now.getMonth() === 0);
        
        if (isJanuary) {
            const endOfJanuary = new Date(now.getFullYear(), 0, 31, 23, 59, 59);
            const timeDiff = endOfJanuary - now;
            const daysRemaining = Math.max(0, Math.ceil(timeDiff / (1000 * 60 * 60 * 24)));
            
            document.getElementById('loginMonthText').textContent = 
                `ŸÖŸÅÿ™Ÿàÿ≠ ŸÑŸÑŸÉÿ™ÿßÿ®ÿ©! ŸÖÿ™ÿ®ŸÇŸä ${daysRemaining} ŸäŸàŸÖ ŸÑŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ™ŸÉ.`;
        } else {
            document.getElementById('loginMonthText').textContent = 
                'ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ŸÖŸÜÿ™ŸáŸä. ŸäŸÖŸÉŸÜŸÉ ŸÅŸÇÿ∑ ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©.';
        }
    }
    
    function showViewOldWishes() {
        document.getElementById('dateCheckScreen').style.display = 'none';
        document.getElementById('viewOldWishesScreen').style.display = 'flex';
        document.getElementById('oldWishesName').focus();
    }
    
    function showAdminLogin() {
        document.getElementById('dateCheckScreen').style.display = 'none';
        document.getElementById('adminLoginScreen').style.display = 'flex';
        document.getElementById('adminPassword').focus();
    }
    
    function backToDateCheck() {
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('viewOldWishesScreen').style.display = 'none';
        document.getElementById('adminLoginScreen').style.display = 'none';
        document.getElementById('dateCheckScreen').style.display = 'flex';
        
        startDateCheck();
    }
    
    // =================== ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ===================
    async function submitNewWish() {
        const now = new Date();
        const isJanuary = (now.getMonth() === 0);
        
        if (!isJanuary) {
            showAlert('‚ùå ÿßŸÑŸÖŸàŸÇÿπ ŸÖÿ∫ŸÑŸÇ ÿ≠ÿßŸÑŸäÿßŸã! ŸäŸÖŸÉŸÜŸÉ ŸÅŸÇÿ∑ ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©.', 'warning');
            return;
        }
        
        const userName = document.getElementById('userName').value.trim();
        const wishText = document.getElementById('wishText').value.trim();
        
        if (!userName) {
            showAlert('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖŸÉ', 'warning');
            return;
        }
        
        if (!wishText) {
            showAlert('ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ©', 'warning');
            return;
        }
        
        if (userName.length < 2) {
            showAlert('ÿßŸÑÿßÿ≥ŸÖ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ≠ÿ±ŸÅŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ', 'warning');
            return;
        }
        
        if (wishText.length < 10) {
            showAlert('ÿßŸÑÿ£ŸÖŸÜŸäÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ', 'warning');
            return;
        }
        
        if (wishText.length > 500) {
            showAlert('ÿßŸÑÿ£ŸÖŸÜŸäÿ© ÿ∑ŸàŸäŸÑÿ© ÿ¨ÿØÿßŸã (ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ 500 ÿ≠ÿ±ŸÅ)', 'warning');
            return;
        }
        
        if (!isFirebaseInitialized) {
            showAlert('‚ùå ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑÿ©. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.', 'error');
            return;
        }
        
        showLoading(true);
        
        try {
            const currentYear = now.getFullYear();
            
            // ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿ£ŸÖŸÜŸäÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ Ÿáÿ∞ÿß ÿßŸÑÿπÿßŸÖ
            const wishesRef = database.ref('wishes');
            const snapshot = await wishesRef.orderByChild('userId_year').equalTo(`${userName}_${currentYear}`).once('value');
            
            if (snapshot.exists()) {
                showAlert('‚ùå ŸÑŸÇÿØ ŸÉÿ™ÿ®ÿ™ ÿ£ŸÖŸÜŸäÿ© ŸÑŸáÿ∞ÿß ÿßŸÑÿπÿßŸÖ ÿ®ÿßŸÑŸÅÿπŸÑ! ŸäŸÖŸÉŸÜŸÉ ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ© ÿ¨ÿØŸäÿØÿ© ŸÅŸä ŸäŸÜÿßŸäÿ± ÿßŸÑŸÇÿßÿØŸÖ.', 'warning');
                showLoading(false);
                return;
            }
            
            // ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿπÿ±ŸÅ ŸÅÿ±ŸäÿØ ŸÑŸÑÿ£ŸÖŸÜŸäÿ©
            const wishId = `wish_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            
            // ÿ•ÿπÿØÿßÿØ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÖŸÜŸäÿ©
            const wishData = {
                id: wishId,
                text: wishText,
                userName: userName,
                displayName: `${userName} ‚ú®`,
                userId: userName, // ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿßÿ≥ŸÖ ŸÉŸÖŸÅÿ™ÿßÿ≠
                year: currentYear,
                timestamp: Date.now(),
                date: now.toLocaleDateString('ar-EG'),
                time: now.toLocaleTimeString('ar-EG'),
                timeFull: now.toLocaleTimeString('ar-EG'),
                month: 'ŸäŸÜÿßŸäÿ±',
                userId_year: `${userName}_${currentYear}`,
                wishCategory: getWishCategory(wishText),
                emoji: getWishEmoji(wishText),
                likes: 0,
                isPublic: true,
                wishColor: getRandomColor()
            };
            
            // ÿ≠ŸÅÿ∏ ÿßŸÑÿ£ŸÖŸÜŸäÿ©
            await database.ref(`wishes/${wishId}`).set(wishData);
            
            // ÿ≠ŸÅÿ∏ ŸÜÿ≥ÿÆÿ© ŸÅŸä userWishes
            await database.ref(`userWishes/${userName}/${wishId}`).set(wishData);
            
            showAlert('‚ú® ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ£ŸÖŸÜŸäÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÖÿ¥ÿßÿ±ŸÉÿ™ŸÉ.', 'success');
            
            // ÿßŸÑÿßŸÜÿ™ŸÇÿßŸÑ ŸÑŸàÿ∂ÿπ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©
            currentUser = {
                name: userName,
                type: 'viewer',
                viewingMode: true,
                currentYear: currentYear,
                uid: userName
            };
            
            // ŸÖÿ≥ÿ≠ ÿßŸÑÿ≠ŸÇŸàŸÑ
            document.getElementById('userName').value = '';
            document.getElementById('wishText').value = '';
            document.getElementById('charCount').textContent = '0/500';
            
            showMainApp();
            
        } catch (error) {
            console.error("‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ£ŸÖŸÜŸäÿ©:", error);
            showAlert('‚ùå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿ©. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.', 'error');
        } finally {
            showLoading(false);
        }
    }
    
    function getWishCategory(text) {
        const categories = {
            'ÿ™ÿπŸÑŸäŸÖ Ÿàÿ™ÿ∑ŸàŸäÿ±': ['ÿ£ÿ™ÿπŸÑŸÖ', 'ÿ£ÿ∑Ÿàÿ±', 'ÿ£ÿØÿ±ÿ≥', 'ÿ£ÿ™ÿπŸÑŸëŸÖ', 'ŸÖÿπÿ±ŸÅÿ©', 'ÿπŸÑŸÖ'],
            'ÿ≥ŸÅÿ± ŸàŸÖÿ∫ÿßŸÖÿ±ÿßÿ™': ['ÿ£ÿ≥ÿßŸÅÿ±', 'ÿ£ÿ≤Ÿàÿ±', 'ÿ£ÿ∞Ÿáÿ®', 'ÿ±ÿ≠ŸÑÿ©', 'ÿ≥ŸÅÿ±', 'ÿ≥ÿ£ÿ±Ÿâ'],
            'ÿπŸÖŸÑ Ÿàÿßÿ≠ÿ™ÿ±ÿßŸÅ': ['ÿ£ÿπŸÖŸÑ', 'ÿ£ŸÅÿ™ÿ≠', 'ŸÖÿ¥ÿ±Ÿàÿπ', 'Ÿàÿ∏ŸäŸÅÿ©', 'ŸÖŸáŸÜÿ©', 'ÿßÿ≠ÿ™ÿ±ÿßŸÅ'],
            'ÿ•ÿ®ÿØÿßÿπ ŸàŸÅŸÜŸàŸÜ': ['ÿ£ŸÉÿ™ÿ®', 'ÿ£ÿ±ÿ≥ŸÖ', 'ÿ£ÿ∫ŸÜŸä', 'ÿ£ŸÑÿπÿ®', 'ŸÅŸÜ', 'ÿ•ÿ®ÿØÿßÿπ'],
            'ÿµÿ≠ÿ© ŸàŸÑŸäÿßŸÇÿ©': ['ÿ£ŸÖÿßÿ±ÿ≥', 'ÿ£ÿ™ŸÖÿ™ÿπ', 'ÿµÿ≠ÿ©', 'ÿ±Ÿäÿßÿ∂ÿ©', 'ŸÑŸäÿßŸÇÿ©', 'ÿ¨ÿ≥ŸÖ'],
            'ÿπŸÑÿßŸÇÿßÿ™ Ÿàÿπÿßÿ¶ŸÑÿ©': ['ÿ£ŸÑÿ™ŸÇŸä', 'ÿ£ÿπŸäÿ¥', 'ÿπÿßÿ¶ŸÑÿ©', 'ÿ£ÿµÿØŸÇÿßÿ°', 'ÿ≠ÿ®', 'ÿ≤Ÿàÿßÿ¨']
        };
        
        for (const [category, keywords] of Object.entries(categories)) {
            for (const keyword of keywords) {
                if (text.includes(keyword)) {
                    return category;
                }
            }
        }
        
        return 'ÿπÿßŸÖÿ© Ÿàÿ•ŸÜÿ≥ÿßŸÜŸäÿ©';
    }
    
    function getWishEmoji(text) {
        const emojis = {
            'ÿ™ÿπŸÑŸäŸÖ Ÿàÿ™ÿ∑ŸàŸäÿ±': 'üìö',
            'ÿ≥ŸÅÿ± ŸàŸÖÿ∫ÿßŸÖÿ±ÿßÿ™': '‚úàÔ∏è',
            'ÿπŸÖŸÑ Ÿàÿßÿ≠ÿ™ÿ±ÿßŸÅ': 'üíº',
            'ÿ•ÿ®ÿØÿßÿπ ŸàŸÅŸÜŸàŸÜ': 'üé®',
            'ÿµÿ≠ÿ© ŸàŸÑŸäÿßŸÇÿ©': 'üí™',
            'ÿπŸÑÿßŸÇÿßÿ™ Ÿàÿπÿßÿ¶ŸÑÿ©': '‚ù§Ô∏è',
            'ÿπÿßŸÖÿ© Ÿàÿ•ŸÜÿ≥ÿßŸÜŸäÿ©': '‚ú®'
        };
        
        const category = getWishCategory(text);
        return emojis[category] || '‚ú®';
    }
    
    function getRandomColor() {
        const colors = ['#ff00ff', '#00ffff', '#ffff00', '#00ff00', '#ff8000', '#0080ff'];
        return colors[Math.floor(Math.random() * colors.length)];
    }
    
    function viewOldWishes() {
        const userName = document.getElementById('oldWishesName').value.trim();
        
        if (!userName) {
            showAlert('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖŸÉ', 'warning');
            return;
        }
        
        currentUser = {
            name: userName,
            type: 'viewer',
            viewingMode: true,
            currentYear: new Date().getFullYear(),
            uid: userName
        };
        
        showMainApp();
    }
    
    function loginAsAdmin() {
        const adminPassword = document.getElementById('adminPassword').value.trim();
        
        if (!adminPassword) {
            showAlert('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ±', 'warning');
            return;
        }
        
        if (ADMIN_PASSWORDS[adminPassword]) {
            currentUser = {
                name: "ÿßŸÑŸÖÿØŸäÿ±",
                type: 'admin',
                viewingMode: false,
                currentYear: new Date().getFullYear(),
                uid: 'admin_' + Date.now()
            };
            
            showAlert('üëë ÿ™ŸÖ ÿßŸÑÿØÿÆŸàŸÑ ŸÉŸÖÿØŸäÿ± ÿ®ŸÜÿ¨ÿßÿ¨!', 'success');
            showMainApp();
        } else {
            showAlert('‚ùå ŸÉŸÑŸÖÿ© ÿßŸÑÿ≥ÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©', 'error');
            document.getElementById('adminPassword').value = '';
            document.getElementById('adminPassword').focus();
        }
    }
    
    // =================== ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ===================
    function showMainApp() {
        document.getElementById('dateCheckScreen').style.display = 'none';
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('viewOldWishesScreen').style.display = 'none';
        document.getElementById('adminLoginScreen').style.display = 'none';
        document.getElementById('mainApp').style.display = 'block';
        
        // ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        updateUserInfo();
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ¥Ÿáÿ±
        updateMonthStatus();
        
        // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ©
        if (currentUser.type === 'admin') {
            loadAllWishesForAdmin();
            document.getElementById('adminPanel').style.display = 'block';
            document.getElementById('yearSelection').style.display = 'none';
            document.getElementById('wishForm').style.display = 'none';
            document.getElementById('wishesTitleText').textContent = 'üåü ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™';
        } else if (currentUser.viewingMode) {
            loadUserWishesByYear();
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('yearSelection').style.display = 'block';
            document.getElementById('wishForm').style.display = 'none';
            document.getElementById('wishesTitleText').textContent = `üåü ÿ£ŸÖŸÜŸäÿßÿ™ ${currentUser.name}`;
        } else {
            loadCurrentYearWishes();
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('yearSelection').style.display = 'none';
            
            // ÿßŸÑÿ™ÿ≠ŸÇŸÇ ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸäŸÖŸÉŸÜ ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ©
            const now = new Date();
            const isJanuary = (now.getMonth() === 0);
            if (isJanuary) {
                document.getElementById('wishForm').style.display = 'block';
                
                // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπ ŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ£ÿ≠ÿ±ŸÅ
                const newWishText = document.getElementById('newWishText');
                const newCharCount = document.getElementById('newCharCount');
                
                newWishText.addEventListener('input', function() {
                    const length = this.value.length;
                    newCharCount.textContent = `${length}/500`;
                    
                    if (length > 450) {
                        newCharCount.className = 'character-count warning';
                    } else if (length > 500) {
                        newCharCount.className = 'character-count danger';
                    } else {
                        newCharCount.className = 'character-count';
                    }
                });
            }
            
            document.getElementById('wishesTitleText').textContent = 'üåü ÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ŸÜÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©';
        }
    }
    
    function updateUserInfo() {
        document.getElementById('userDisplayName').textContent = currentUser.name;
        
        let roleText = '';
        let badgesHTML = '';
        
        if (currentUser.type === 'admin') {
            roleText = 'ŸÖÿØŸäÿ± ÿßŸÑŸÜÿ∏ÿßŸÖ';
            badgesHTML = '<span class="badge admin">üëë ŸÖÿØŸäÿ±</span>';
        } else if (currentUser.viewingMode) {
            roleText = 'Ÿàÿ∂ÿπ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©';
            badgesHTML = '<span class="badge viewer">üëÅÔ∏è ŸÖÿ¥ÿßŸáÿØ</span>';
        } else {
            roleText = 'ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿπÿßÿØŸä';
            badgesHTML = '<span class="badge user">üë§ ŸÖÿ≥ÿ™ÿÆÿØŸÖ</span>';
        }
        
        document.getElementById('userRole').textContent = roleText;
        document.getElementById('userBadges').innerHTML = badgesHTML;
        
        // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ±ŸÖÿ≤Ÿäÿ©
        const firstLetter = currentUser.name.charAt(0).toUpperCase();
        document.getElementById('userAvatar').textContent = firstLetter;
        
        // ÿ™ÿÆÿµŸäÿµ ŸÑŸàŸÜ ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ±ŸÖÿ≤Ÿäÿ©
        if (currentUser.type === 'admin') {
            document.getElementById('userAvatar').style.background = 'linear-gradient(135deg, #ff0000, #ff00ff)';
        } else if (currentUser.viewingMode) {
            document.getElementById('userAvatar').style.background = 'linear-gradient(135deg, #0080ff, #00ffff)';
        } else {
            document.getElementById('userAvatar').style.background = 'linear-gradient(135deg, #ff00ff, #ffff00)';
        }
    }
    
    function updateMonthStatus() {
        const now = new Date();
        const isJanuary = (now.getMonth() === 0);
        const currentYear = now.getFullYear();
        
        if (isJanuary) {
            const endOfJanuary = new Date(currentYear, 0, 31, 23, 59, 59);
            const timeDiff = endOfJanuary - now;
            const daysRemaining = Math.max(0, Math.ceil(timeDiff / (1000 * 60 * 60 * 24)));
            
            document.getElementById('monthIcon').className = "fas fa-calendar-star";
            document.getElementById('monthTitle').textContent = `ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ${currentYear}`;
            document.getElementById('monthText').textContent = `ŸÖŸÅÿ™Ÿàÿ≠ ŸÑŸÑŸÉÿ™ÿßÿ®ÿ©! ŸÖÿ™ÿ®ŸÇŸä ${daysRemaining} ŸäŸàŸÖ ŸÑŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ™ŸÉ.`;
        } else {
            document.getElementById('monthIcon').className = "fas fa-calendar-times";
            document.getElementById('monthTitle').textContent = "ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ± ŸÖŸÜÿ™ŸáŸä";
            document.getElementById('monthText').textContent = "ŸäŸÖŸÉŸÜŸÉ ŸÅŸÇÿ∑ ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©. ÿßŸÑŸÖŸàŸÇÿπ ŸäŸÅÿ™ÿ≠ ŸÅŸä ŸäŸÜÿßŸäÿ± ÿßŸÑŸÇÿßÿØŸÖ.";
        }
    }
    
    // =================== ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ===================
    function loadAllWishesForAdmin() {
        if (!isFirebaseInitialized) {
            showAlert('‚ùå ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑÿ©', 'error');
            return;
        }
        
        showLoading(true);
        
        database.ref('wishes').orderByChild('timestamp').on('value', (snapshot) => {
            const wishes = snapshot.val();
            const wishesGrid = document.getElementById('wishesGrid');
            const emptyState = document.getElementById('emptyState');
            const adminTableBody = document.getElementById('adminTableBody');
            
            if (!wishes || Object.keys(wishes).length === 0) {
                emptyState.style.display = 'block';
                document.getElementById('emptyStateText').textContent = 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÖŸÜŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ®ÿπÿØ.';
                wishesGrid.innerHTML = '';
                adminTableBody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÖŸÜŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ÿ®ÿπÿØ</td></tr>';
                
                // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
                document.getElementById('totalWishes').textContent = '0';
                document.getElementById('totalYears').textContent = '0';
                document.getElementById('totalUsers').textContent = '0';
                
                showLoading(false);
                return;
            }
            
            emptyState.style.display = 'none';
            wishesGrid.innerHTML = '';
            adminTableBody.innerHTML = '';
            wishesMap.clear();
            
            const wishesArray = Object.entries(wishes).map(([key, value]) => {
                const safeKey = encodeURIComponent(key);
                wishesMap.set(safeKey, key);
                return {
                    id: key,
                    safeId: safeKey,
                    ...value
                };
            }).sort((a, b) => b.timestamp - a.timestamp);
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™
            const yearsSet = new Set();
            const usersSet = new Set();
            
            wishesArray.forEach(wish => {
                yearsSet.add(wish.year);
                usersSet.add(wish.userId);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑÿ¥ÿ®ŸÉÿ©
                const wishCard = createWishCard(wish, true);
                wishesGrid.appendChild(wishCard);
                
                // ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑÿ¨ÿØŸàŸÑ
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${wish.userName}</td>
                    <td style="max-width: 300px;">${wish.text.substring(0, 100)}${wish.text.length > 100 ? '...' : ''}</td>
                    <td>${wish.year}</td>
                    <td>${wish.date}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="delete-btn-small" onclick="showDeleteConfirmation('${wish.safeId}')">
                                <i class="fas fa-trash-alt"></i> ÿ≠ÿ∞ŸÅ
                            </button>
                        </div>
                    </td>
                `;
                adminTableBody.appendChild(row);
            });
            
            document.getElementById('totalWishes').textContent = wishesArray.length;
            document.getElementById('totalYears').textContent = yearsSet.size;
            document.getElementById('totalUsers').textContent = usersSet.size;
            
            showLoading(false);
        }, (error) => {
            console.error("‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™:", error);
            showAlert('‚ùå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™', 'error');
            showLoading(false);
        });
    }
    
    function loadUserWishesByYear() {
        if (!isFirebaseInitialized) {
            showAlert('‚ùå ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑÿ©', 'error');
            return;
        }
        
        showLoading(true);
        
        database.ref('userWishes/' + currentUser.name).once('value')
            .then((snapshot) => {
                const wishes = snapshot.val();
                const wishesGrid = document.getElementById('wishesGrid');
                const emptyState = document.getElementById('emptyState');
                const yearButtons = document.getElementById('yearButtons');
                
                if (!wishes || Object.keys(wishes).length === 0) {
                    emptyState.style.display = 'block';
                    document.getElementById('emptyStateText').textContent = 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÖŸÜŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ŸÑŸáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ.';
                    wishesGrid.innerHTML = '';
                    yearButtons.innerHTML = '<p style="color: rgba(255,255,255,0.7); padding: 20px;">ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ŸÜŸàÿßÿ™</p>';
                    showLoading(false);
                    return;
                }
                
                // ÿ¨ŸÖÿπ ÿßŸÑÿ≥ŸÜŸàÿßÿ™ ÿßŸÑŸÅÿ±ŸäÿØÿ©
                const yearsSet = new Set();
                const wishesArray = Object.entries(wishes).map(([key, value]) => {
                    yearsSet.add(value.year);
                    return {
                        id: key,
                        safeId: encodeURIComponent(key),
                        ...value
                    };
                }).sort((a, b) => b.year - a.year);
                
                // ÿπÿ±ÿ∂ ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ≥ŸÜŸàÿßÿ™
                yearButtons.innerHTML = '';
                const yearsArray = Array.from(yearsSet).sort((a, b) => b - a);
                
                yearsArray.forEach(year => {
                    const yearBtn = document.createElement('button');
                    yearBtn.className = `year-btn ${year === selectedYear ? 'active' : ''}`;
                    yearBtn.textContent = year;
                    yearBtn.onclick = () => {
                        selectedYear = year;
                        document.querySelectorAll('.year-btn').forEach(btn => btn.classList.remove('active'));
                        yearBtn.classList.add('active');
                        document.getElementById('wishesTitleText').textContent = `üåü ÿ£ŸÖŸÜŸäÿßÿ™ ${currentUser.name} - ${year}`;
                        displayWishesForYear(wishesArray, year);
                    };
                    yearButtons.appendChild(yearBtn);
                });
                
                if (yearsArray.length > 0 && !selectedYear) {
                    selectedYear = yearsArray[0];
                    const firstBtn = yearButtons.querySelector('.year-btn');
                    if (firstBtn) firstBtn.classList.add('active');
                }
                
                document.getElementById('wishesTitleText').textContent = `üåü ÿ£ŸÖŸÜŸäÿßÿ™ ${currentUser.name} - ${selectedYear}`;
                displayWishesForYear(wishesArray, selectedYear);
                
                showLoading(false);
            })
            .catch((error) => {
                console.error("‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ŸÖŸÜŸäÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:", error);
                showAlert('‚ùå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™', 'error');
                showLoading(false);
            });
    }
    
    function displayWishesForYear(wishesArray, year) {
        const wishesGrid = document.getElementById('wishesGrid');
        const emptyState = document.getElementById('emptyState');
        
        const yearWishes = wishesArray.filter(wish => wish.year == year);
        
        if (yearWishes.length === 0) {
            emptyState.style.display = 'block';
            document.getElementById('emptyStateText').textContent = `ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÖŸÜŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ŸÑÿ≥ŸÜÿ© ${year}.`;
            wishesGrid.innerHTML = '';
            return;
        }
        
        emptyState.style.display = 'none';
        wishesGrid.innerHTML = '';
        
        yearWishes.forEach(wish => {
            const wishCard = createWishCard(wish, false);
            wishesGrid.appendChild(wishCard);
        });
    }
    
    function loadCurrentYearWishes() {
        if (!isFirebaseInitialized) {
            showAlert('‚ùå ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑÿ©', 'error');
            return;
        }
        
        const currentYear = new Date().getFullYear();
        
        database.ref('wishes').orderByChild('year').equalTo(currentYear).on('value', (snapshot) => {
            const wishes = snapshot.val();
            const wishesGrid = document.getElementById('wishesGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (!wishes || Object.keys(wishes).length === 0) {
                emptyState.style.display = 'block';
                document.getElementById('emptyStateText').textContent = 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ£ŸÖŸÜŸäÿßÿ™ ŸÖÿ≥ÿ¨ŸÑÿ© ŸÑŸáÿ∞Ÿá ÿßŸÑÿ≥ŸÜÿ© ÿ®ÿπÿØ. ŸÉŸÜ ÿ£ŸàŸÑ ŸÖŸÜ Ÿäÿ≥ÿ¨ŸÑ ÿ£ŸÖŸÜŸäÿ™Ÿá!';
                document.getElementById('firstWishBtn').style.display = 'block';
                wishesGrid.innerHTML = '';
                return;
            }
            
            emptyState.style.display = 'none';
            document.getElementById('firstWishBtn').style.display = 'none';
            wishesGrid.innerHTML = '';
            wishesMap.clear();
            
            const wishesArray = Object.entries(wishes).map(([key, value]) => {
                const safeKey = encodeURIComponent(key);
                wishesMap.set(safeKey, key);
                return {
                    id: key,
                    safeId: safeKey,
                    ...value
                };
            }).sort((a, b) => b.timestamp - a.timestamp);
            
            wishesArray.forEach(wish => {
                const wishCard = createWishCard(wish, false);
                wishesGrid.appendChild(wishCard);
            });
        });
    }
    
    function createWishCard(wish, isAdminView = false) {
        const card = document.createElement('div');
        card.className = `wish-card ${isAdminView ? 'admin-view' : ''}`;
        
        const date = new Date(wish.timestamp);
        const formattedDate = wish.date || date.toLocaleDateString('ar-EG', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        const time = wish.time || date.toLocaleTimeString('ar-EG', {
            hour: '2-digit',
            minute: '2-digit'
        });
        
        card.innerHTML = `
            ${isAdminView ? 
                `<button class="delete-wish-btn" onclick="showDeleteConfirmation('${wish.safeId}')" title="ÿ≠ÿ∞ŸÅ ÿßŸÑÿ£ŸÖŸÜŸäÿ©">
                    <i class="fas fa-trash-alt"></i>
                </button>` 
                : ''}
            <div class="wish-header">
                <div class="wish-name">
                    <i class="fas fa-user"></i> ${wish.userName || wish.displayName || 'ŸÖÿ≥ÿ™ÿÆÿØŸÖ'}
                </div>
                <span class="wish-year">${wish.year}</span>
            </div>
            <div class="wish-text">${wish.text || 'ŸÑÿß ŸäŸàÿ¨ÿØ ŸÜÿµ'}</div>
            <div class="wish-footer">
                <div class="wish-date">
                    <i class="far fa-clock"></i> ${formattedDate} - ${time}
                </div>
                <div style="color: ${wish.wishColor || '#ff00ff'}; font-size: 1.5rem;">
                    ${wish.emoji || '‚ú®'}
                </div>
            </div>
        `;
        
        return card;
    }
    
    function submitWishFromApp() {
        const now = new Date();
        const isJanuary = (now.getMonth() === 0);
        
        if (!isJanuary) {
            showAlert('‚ùå ŸäŸÖŸÉŸÜ ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ŸÅŸÇÿ∑ ŸÅŸä ÿ¥Ÿáÿ± ŸäŸÜÿßŸäÿ±', 'warning');
            return;
        }
        
        const wishText = document.getElementById('newWishText').value.trim();
        
        if (!wishText || wishText.length < 10) {
            showAlert('ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ÿ£ŸÖŸÜŸäÿ© ÿµÿ≠Ÿäÿ≠ÿ© (10 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ)', 'warning');
            return;
        }
        
        if (wishText.length > 500) {
            showAlert('ÿßŸÑÿ£ŸÖŸÜŸäÿ© ÿ∑ŸàŸäŸÑÿ© ÿ¨ÿØÿßŸã (ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ 500 ÿ≠ÿ±ŸÅ)', 'warning');
            return;
        }
        
        submitNewWish();
    }
    
    // =================== ÿØŸàÿßŸÑ ÿßŸÑÿ≠ÿ∞ŸÅ ===================
    function showDeleteConfirmation(safeWishId) {
        if (currentUser.type !== 'admin') {
            showAlert('‚ùå ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ŸÑÿ≠ÿ∞ŸÅ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™', 'error');
            return;
        }
        
        const realWishId = wishesMap.get(safeWishId);
        
        if (!realWishId) {
            showAlert('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿ£ŸÖŸÜŸäÿ©', 'error');
            return;
        }
        
        wishToDelete = realWishId;
        deleteAllMode = false;
        document.getElementById('confirmationText').textContent = 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑÿ£ŸÖŸÜŸäÿ©ÿü';
        document.getElementById('confirmationModal').style.display = 'flex';
    }
    
    function showClearAllConfirmation() {
        if (currentUser.type !== 'admin') {
            showAlert('‚ùå ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿµŸÑÿßÿ≠Ÿäÿ© ŸÑÿ≠ÿ∞ŸÅ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™', 'error');
            return;
        }
        
        wishToDelete = null;
        deleteAllMode = true;
        document.getElementById('clearAllText').textContent = '‚ö†Ô∏è ÿ™ÿ≠ÿ∞Ÿäÿ±: ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ÿü Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜŸá Ÿàÿ≥Ÿäÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ŸÜŸáÿßÿ¶ŸäÿßŸã!';
        document.getElementById('clearAllModal').style.display = 'flex';
    }
    
    async function confirmDelete() {
        if (!isFirebaseInitialized) {
            showAlert('‚ùå ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑÿ©', 'error');
            cancelDelete();
            return;
        }
        
        showLoading(true);
        
        try {
            if (deleteAllMode) {
                // ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™
                await database.ref('wishes').remove();
                await database.ref('userWishes').remove();
                showAlert('‚úÖ ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÖŸÜŸäÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            } else {
                if (!wishToDelete) {
                    showAlert('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿ£ŸÖŸÜŸäÿ© ŸÑŸÑÿ≠ÿ∞ŸÅ', 'error');
                    cancelDelete();
                    showLoading(false);
                    return;
                }
                
                // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÖŸÜŸäÿ© ŸÇÿ®ŸÑ ÿ≠ÿ∞ŸÅŸáÿß
                const wishSnapshot = await database.ref('wishes/' + wishToDelete).once('value');
                const wishData = wishSnapshot.val();
                
                if (wishData) {
                    // ÿ≠ÿ∞ŸÅ ŸÖŸÜ wishes
                    await database.ref('wishes/' + wishToDelete).remove();
                    
                    // ÿ≠ÿ∞ŸÅ ŸÖŸÜ userWishes
                    await database.ref(`userWishes/${wishData.userId}/${wishToDelete}`).remove();
                    
                    showAlert('‚úÖ ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ£ŸÖŸÜŸäÿ© ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
                }
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿ±ÿ∂
            if (currentUser.type === 'admin') {
                loadAllWishesForAdmin();
            } else if (currentUser.viewingMode) {
                loadUserWishesByYear();
            } else {
                loadCurrentYearWishes();
            }
            
        } catch (error) {
            console.error("‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑÿ£ŸÖŸÜŸäÿ©:", error);
            showAlert('‚ùå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑÿ£ŸÖŸÜŸäÿ©', 'error');
        } finally {
            showLoading(false);
            cancelDelete();
            cancelClearAll();
        }
    }
    
    function confirmClearAll() {
        deleteAllMode = true;
        confirmDelete();
    }
    
    function cancelDelete() {
        document.getElementById('confirmationModal').style.display = 'none';
        wishToDelete = null;
        deleteAllMode = false;
    }
    
    function cancelClearAll() {
        document.getElementById('clearAllModal').style.display = 'none';
        wishToDelete = null;
        deleteAllMode = false;
    }
    
    function logout() {
        currentUser = {
            name: '',
            type: 'user',
            viewingMode: false,
            currentYear: new Date().getFullYear(),
            uid: null
        };
        
        // ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ
        document.getElementById('userName').value = '';
        document.getElementById('wishText').value = '';
        document.getElementById('oldWishesName').value = '';
        document.getElementById('adminPassword').value = '';
        document.getElementById('newWishText').value = '';
        document.getElementById('charCount').textContent = '0/500';
        document.getElementById('newCharCount').textContent = '0/500';
        
        document.getElementById('mainApp').style.display = 'none';
        document.getElementById('dateCheckScreen').style.display = 'flex';
        
        // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≥ŸÜÿ© ÿßŸÑŸÖÿ≠ÿØÿØÿ©
        selectedYear = new Date().getFullYear();
        
        // ÿ•ÿπÿßÿØÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàŸÇÿ™
        startDateCheck();
        
        showAlert('ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨ ÿ®ŸÜÿ¨ÿßÿ¨', 'info');
    }
    
    // =================== ÿßŸÑÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ===================
    window.onload = function() {
        console.log("üéâ ŸÖŸàŸÇÿπ ÿ£ŸÖŸÜŸäÿßÿ™ ŸäŸÜÿßŸäÿ± ÿ¨ÿßŸáÿ≤!");
        
        // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÜÿ¨ŸàŸÖ
        createStars();
        starsInterval = setInterval(() => {
            const stars = document.querySelectorAll('.star');
            stars.forEach(star => {
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
            });
        }, 10000);
        
        // ÿ®ÿØÿ° ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸàŸÇÿ™
        startDateCheck();
        
        // ÿ™ŸáŸäÿ¶ÿ© Firebase
        initializeFirebase();
        
        // ÿ•ÿ∂ÿßŸÅÿ© ŸÖÿ≥ÿ™ŸÖÿπŸäŸÜ ŸÑÿ£ÿ≠ÿØÿßÿ´ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
        document.getElementById('userName')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('wishText').focus();
            }
        });
        
        document.getElementById('wishText')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                submitNewWish();
            }
        });
        
        document.getElementById('oldWishesName')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                viewOldWishes();
            }
        });
        
        document.getElementById('adminPassword')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                loginAsAdmin();
            }
        });
        
        document.getElementById('newWishText')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                submitWishFromApp();
            }
        });
        
        // ÿ•ÿ∏Ÿáÿßÿ± ÿ±ÿ≥ÿßŸÑÿ© ÿ™ÿ±ÿ≠Ÿäÿ®Ÿäÿ© ÿ®ÿπÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
        setTimeout(() => {
            if (document.getElementById('dateCheckScreen').style.display !== 'none') {
                showAlert('ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ£ŸÖŸÜŸäÿßÿ™ ŸäŸÜÿßŸäÿ± ‚ú®', 'info', 3000);
            }
        }, 2000);
    };
    
    // ÿ•ŸäŸÇÿßŸÅ ÿßŸÑŸÜÿ¨ŸàŸÖ ÿπŸÜÿØ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿµŸÅÿ≠ÿ©
    window.onbeforeunload = function() {
        if (starsInterval) {
            clearInterval(starsInterval);
        }
        if (dateCheckInterval) {
            clearInterval(dateCheckInterval);
        }
    };
    </script>
</body>
</html>